<% if @user || params[:action] == 'mine' %>
	<% codeable_type = "#{params[:controller].singularize}_filter" %>
	
	<% if @user %>
		<% user = @user %>
		<% codeable_type += "_ta" %>
	<% elsif params[:action] == 'mine' %>
		<% user = @current_user %>
		<% codeable_type += "_my" %>
	<% end %>
	
	<% if params[:filter] %>
		<%= link_to "#{ALL_CN}", { :user_id => user.id, :controller => params[:controller], :action => 'index' }, :class => '' %>
	<% else %>
		<%= link_to "#{ALL_CN} (#{items_set_count})", { :user_id => user.id, :controller => params[:controller], :action => 'index' }, :class => 'current' %>
	<% end %>
	<% for c in Code.find(:all, :conditions => { :codeable_type => codeable_type }, :order => 'code') %>
		<% if c.name == params[:filter] %>
			<%= link_to "#{c.title} (#{items_set_count})", { :user_id => user.id, :controller => params[:controller], :action => 'index', :filter => c.name}, :class => 'current' %>
		<% else %>
			<%= link_to "#{c.title}", { :user_id => user.id, :controller => params[:controller], :action => 'index', :filter => c.name}, :class => '' %>
		<% end %>
	<% end %>
	
<% end %>
