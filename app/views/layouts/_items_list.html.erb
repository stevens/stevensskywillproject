<% if show_paginate %>
	<% items = items_paginate(items_set) %>
<% elsif limit %>
	<% items = items_set[0..limit-1] %>
<% else %>
	<% items = items_set %>
<% end %>
<% if items.size > 0 %>
	<% item_type = type_for(items[0]) %>
<% end %>

<% if show_paginate %>
	<%= render :partial => "/layouts/items_paginate",
						 :locals => {:items => items} %>
<% end %>

<div class="sub_block_tb">
<table class="content">
	
	<% for item in items %>
	  <tr>  	
	    
	    <td class="left_column">
	    	<div class="sub_block">
					<% if show_parent %>
						<% photoable_type = itemable_type(item, itemable_sym) %>
						<% photoable = itemable(item, itemable_sym) %>
					<% else %>
						<% photoable_type = item_type %>
						<% photoable = item %>
					<% end %>
					
					<% if show_photo %>
						<div class="list_photo">
		    			<%= render :partial => "/layouts/item_photo",
		    								 :locals => {:item => photoable, 
		    								 						 :photo_style => 'list'} %>
						</div>
					<% end %>
					
					<% if show_below_photo %>
						<div class="below_photo">
							<%= render :partial => "/layouts/below_item_photo", 
												 :locals => {:item => photoable, 
												 						 :show_title => show_title, 
												 						 :show_photo_todo => show_photo_todo} %>
						</div>
					<% end %>

				</div>
	    </td>
	    
	    <td class="right_column_lined">
	    	<div class="sub_block">
    			<%= render :partial => "/#{controller_name(item_type)}/#{item_type.downcase}_s", 
    								 :locals => {:item => item, 
    								 						 :show_parent => show_parent, 
    								 						 :show_todo => show_todo, 
    								 						 :delete_remote => delete_remote} %>
	    	</div>
	    </td>
	    
	  </tr>
	<% end %>
	
</table>
</div>

<% if show_paginate %>
	<%= render :partial => "/layouts/items_paginate",
						 :locals => {:items => items} %>
<% end %>